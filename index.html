<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <title>KOICHI 攻略計畫</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", sans-serif;
      margin: 0;
      padding: 0;
      background: #111;
      color: #f5f5f5;
      display: flex;
      justify-content: center;
    }

    .container {
      max-width: 800px;
      padding: 16px;
    }

    h1 {
      font-size: 1.4rem;
      margin-bottom: 8px;
      text-align: center;
    }

    #story {
      white-space: pre-wrap;
      background: #1f1f1f;
      padding: 16px;
      border-radius: 8px;
      min-height: 260px;
      box-sizing: border-box;
      font-size: 1rem;
      line-height: 1.6;
    }

    .choices {
      display: flex;
      gap: 12px;
      margin-top: 16px;
      flex-wrap: wrap;
    }

    button.choice-btn {
      flex: 1 1 45%;
      padding: 10px 12px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      background: #f5e04d;
      color: #222;
      font-weight: 600;
    }

    button.choice-btn:active {
      transform: scale(0.97);
      opacity: 0.9;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>《KOICHI 攻略計畫》</h1>
    <div id="story"></div>
    <div class="choices">
      <button id="choiceA" class="choice-btn">A</button>
      <button id="choiceB" class="choice-btn">B</button>
    </div>
  </div>

  <script>
    // 劇情場景：每一個 id 都是一個節點，A / B 會走到不同的下一個節點
    const scenes = {
      0: {
        text:
          "【Scene 0｜開場】\n\n" +
          "你是堂本剛。\n" +
          "今天你悄悄來到舞台劇的排練場，沒有通知任何人。\n\n" +
          "理由只有一個——\n" +
          "想看看，現在站在舞台中央的堂本光一。\n\n" +
          "他正吊著鋼索排練飛行，眼神專注得像世界上只有舞台。\n" +
          "你靠在側台，看著他的背影，心裡默默想：\n" +
          "「今天…想讓他知道，我是真的為了他來。」\n\n" +
          "A：走上前，直接稱讚今天的狀態。\n" +
          "B：等他下台後，悄悄遞上一瓶水。",
        nextA: 1,
        nextB: 2,
        ending: false,
        labelA: "A. 主動打招呼",
        labelB: "B. 安靜照顧"
      },

      // A 路線起點：正面直球
      1: {
        text:
          "【Scene 1｜側台聊天】\n\n" +
          "光一下台就看到你。\n" +
          "你開口說：「今天飛得很穩，感覺比上次更放得開。」\n\n" +
          "他愣了一下，隨即笑出來：「你居然看得這麼仔細。」\n" +
          "「今天特地來？」\n\n" +
          "A：『嗯，想看你。』\n" +
          "B：『剛好有空，就順路過來。』",
        nextA: 3,
        nextB: 4,
        ending: false,
        labelA: "A. 坦白是為他來",
        labelB: "B. 先裝得隨意一點"
      },

      // B 路線起點：安靜溫柔
      2: {
        text:
          "【Scene 2｜後台遞水】\n\n" +
          "光一下台，你把準備好的水遞到他手邊。\n" +
          "「小心，剛才飛得蠻激烈的。」你說。\n\n" +
          "光一接過水，視線在你臉上停了兩秒。\n" +
          "「……今天也來看排練？」\n\n" +
          "A：『嗯，想確認你有好好吃飯喝水。』\n" +
          "B：『路過而已，看一下就走。』",
        nextA: 5,
        nextB: 6,
        ending: false,
        labelA: "A. 老媽子式關心",
        labelB: "B. 假裝不在意"
      },

      // A1 → 再加一層直球
      3: {
        text:
          "【Scene 3｜休息室門口】\n\n" +
          "你跟著他一路走到休息室門口。\n" +
          "光一擦著汗，邊笑邊說：「明明是你工作比較忙，結果是你跑來看我。」\n\n" +
          "A：『錄音可以改時間，你的舞台只有今天這一場。』\n" +
          "B：『我只是想確認……你有沒有哪裡不舒服。』",
        nextA: 7,
        nextB: 8,
        ending: false,
        labelA: "A. 把他排在很前面",
        labelB: "B. 用擔心當理由"
      },

      // A 選但又裝作沒事
      4: {
        text:
          "【Scene 4｜走廊擦肩】\n\n" +
          "你嘴上說「順路」，語氣卻不太像在說真話。\n" +
          "光一看了你一眼，沒有拆穿，只是笑著說：「那我今天運氣不錯。」\n" +
          "走到轉角，他停下腳步回頭看你。\n\n" +
          "A：『既然都遇到了，晚餐一起吃？』\n" +
          "B：『要不要我多陪你看一次走位？』",
        nextA: 9,
        nextB: 8,
        ending: false,
        labelA: "A. 直接約吃飯",
        labelB: "B. 以工作之名多待一會"
      },

      // B 路線：溫柔照顧
      5: {
        text:
          "【Scene 5｜休息室沙發】\n\n" +
          "你說：「想確認你有沒有好好照顧自己。」\n" +
          "光一愣了一下，慢慢坐到沙發上，視線落在你手上的水瓶。\n\n" +
          "「你比較讓人擔心吧。」他小聲嘀咕了一句。\n\n" +
          "A：『至少讓我確定，你是好好的。』\n" +
          "B：『那我們互相看著彼此，誰亂來就被念。』",
        nextA: 7,
        nextB: 9,
        ending: false,
        labelA: "A. 把重點放在他身上",
        labelB: "B. 提出『互相照顧』"
      },

      // B 路線：自嘲閃躲
      6: {
        text:
          "【Scene 6｜舞台後方】\n\n" +
          "你笑著說：「我只是路過，別在意。」\n" +
          "光一停下腳步，回頭看你。\n" +
          "「你很少會路過這種地方。」\n\n" +
          "後台一時安靜下來，只剩機器的運轉聲。\n\n" +
          "A：『那就當我是在旁邊守著你。』\n" +
          "B：『那我還是先走，不打擾你排練。』",
        nextA: 8,
        nextB: 12,
        ending: false,
        labelA: "A. 說出真正的目的",
        labelB: "B. 真的準備退場"
      },

      // 通往告白點的線：情緒變安靜
      7: {
        text:
          "【Scene 7｜舞台邊緣】\n\n" +
          "舞台只剩下一道側光，其他燈都關了。\n" +
          "光一坐在台階邊，你站在他旁邊，看著台上的黑暗慢慢安靜下來。\n\n" +
          "他忽然開口：「剛，你這樣一直跑來跑去，不會累嗎？」\n\n" +
          "A：『只要能待在你身邊，就還撐得住。』\n" +
          "B：『會累啊，但看到你在這裡，就覺得值得。』",
        nextA: 100,
        nextB: 100,
        ending: false,
        labelA: "A. 很直白地說出來",
        labelB: "B. 說得溫柔一點"
      },

      // 比較含蓄、慢熱的線
      8: {
        text:
          "【Scene 8｜走位途中】\n\n" +
          "你們一邊走位，一邊隨口聊著工作和瑣事。\n" +
          "光一不時回頭確認你有沒有跟上，像早就習慣你在旁邊一樣。\n\n" +
          "休息的空檔，他突然叫你的名字。\n" +
          "「剛，如果有一天我沒辦法再站在這裡，你會怎麼辦？」\n\n" +
          "A：『那我就想辦法，把你想要的舞台搬到你面前。』\n" +
          "B：『那我就跟你一起去別的地方，慢慢找也可以。』",
        nextA: 100,
        nextB: 101,
        ending: false,
        labelA: "A. 讓他不必離開舞台",
        labelB: "B. 只在乎跟他在一起"
      },

      // 比較日常氛圍線：吃飯 or 約定
      9: {
        text:
          "【Scene 9｜深夜店門口】\n\n" +
          "排練結束後，你們在劇場附近的小店吃了晚餐。\n" +
          "走出店門，夜裡的風很安靜，街上只剩零星路人。\n\n" +
          "光一看著路燈下自己的影子，突然開口：\n" +
          "「你每次都是突然出現，又突然不見。」\n" +
          "「這次…可以不要那麼快消失嗎？」\n\n" +
          "A：『只要你不趕我走，我就留著。』\n" +
          "B：『那你也答應我，下次換你來找我。』",
        nextA: 100,
        nextB: 102,
        ending: false,
        labelA: "A. 表示想一直待在他身邊",
        labelB: "B. 變成雙向的約定"
      },

      // 真的退卻 → Bad End
      12: {
        text:
          "【Scene 12｜錯過的夜晚】\n\n" +
          "你笑著說：「那我先走了，你忙你的。」\n" +
          "話說得很輕鬆，腳步卻不自覺放慢。\n" +
          "光一看著你的背影，最後只是說了一句「路上小心」。\n\n" +
          "排練照常繼續，舞台一切如常，\n" +
          "只是你們之間多了一條誰也沒跨過去的線。\n\n" +
          "🖤【Bad Ending｜保持原樣的兩人】🖤\n\n" +
          "沒有告白，也沒有爭吵，\n" +
          "你們繼續是最熟悉的搭檔，卻停在那裡不再往前。\n\n" +
          "A：重新開始攻略\n" +
          "B：先休息一下（關掉頁面）",
        ending: true,
        labelA: "重新開始",
        labelB: "離開遊戲"
      },

      // Good Ending：真正說開
      100: {
        text:
          "💛【Good Ending｜舞台與你都在】💛\n\n" +
          "你的答案說出口後，空氣安靜了好一會。\n" +
          "你開始懷疑自己是不是講得太直接，正在猶豫要不要開個玩笑帶過。\n\n" +
          "下一秒，光一往前一步，額頭輕輕靠在你的肩上。\n\n" +
          "「……那我就當作，這是正式的。」\n" +
          "「剛，以後不要再只說一半。」\n\n" +
          "你忍不住笑出來，慢慢回抱住他。\n" +
          "舞台的燈早就關了，只剩下你們兩個的呼吸聲。\n\n" +
          "——這一次，你沒有再退回搭檔的位置。\n\n" +
          "A：再玩一次，走別的路線\n" +
          "B：先把這個結局藏在心裡",
        ending: true,
        labelA: "重新開始",
        labelB: "離開遊戲"
      },

      // Soft / bittersweet Ending
      101: {
        text:
          "🤍【Normal Ending｜還差一步】🤍\n\n" +
          "你說：「那我就跟你一起離開，去哪裡都可以。」\n" +
          "光一愣了一下，低頭笑了。\n" +
          "「你講這種話的時候，要不要先提醒我一下？」\n\n" +
          "那一晚你們沒有再多說什麼。\n" +
          "就只是並肩坐在空舞台上，聊著以前的事和還沒實現的夢。\n\n" +
          "沒有明明白白的告白，也沒有明明白白的回答，\n" +
          "但你知道，你們之間已經不再只是工作搭檔。\n\n" +
          "——攻略到大概八成，剩下的交給往後的日子。\n\n" +
          "A：再挑戰一次，想拿 100 分\n" +
          "B：先帶著這個結局休息",
        ending: true,
        labelA: "重新開始",
        labelB: "離開遊戲"
      },

      // 約定系 Happy Normal Ending
      102: {
        text:
          "✨【Happy Ending｜互相追逐】✨\n\n" +
          "你說：「那你先答應，下次換你來找我。」\n" +
          "光一看著你，眼神像是在笑：「好，那就說好了。」\n\n" +
          "之後的日子裡，\n" +
          "有時是你突然出現在後台門口，\n" +
          "有時則是他推開錄音室的門說：「今天輪到我。」\n\n" +
          "你們像是在互相約好，又像是在默默確認對方的存在。\n" +
          "誰也沒急著給這段關係下一個名字。\n\n" +
          "——但只要對方出現，那一天就會變得特別。\n\n" +
          "A：再玩一次，看看其他結局\n" +
          "B：把這個約定收藏起來",
        ending: true,
        labelA: "重新開始",
        labelB: "離開遊戲"
      }
    };

    let currentScene = 0;

    const storyDiv = document.getElementById("story");
    const btnA = document.getElementById("choiceA");
    const btnB = document.getElementById("choiceB");

    function renderScene(id) {
      currentScene = id;
      const sc = scenes[id];
      if (!sc) return;

      storyDiv.textContent = sc.text;
      btnA.textContent = sc.labelA || "A";
      btnB.textContent = sc.labelB || "B";
    }

    function restartGame() {
      renderScene(0);
    }

    function showEndingScreen() {
      document.body.innerHTML = `
      <div style="
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        background:#000;
        color:#f5f5f5;
        font-family:-apple-system,BlinkMacSystemFont,'Microsoft JhengHei',sans-serif;
        text-align:center;
        padding:24px;
        box-sizing:border-box;
      ">
        <div>
          <h2 style="font-size:1.6rem;margin-bottom:16px;">
            🎭 感謝遊玩《KOICHI 攻略計畫》
          </h2>
          <p style="line-height:1.6;">
            你的攻略之旅到這裡告一段落。<br>
            下次再來找光一吧。✨
          </p>
          <button style="
            margin-top:24px;
            padding:10px 20px;
            border:none;
            border-radius:8px;
            background:#f5e04d;
            color:#222;
            font-size:1rem;
            font-weight:600;
            cursor:pointer;
          " onclick="restartGameFromEnding()">
            重新開始遊戲
          </button>
        </div>
      </div>
    `;
    }

    function restartGameFromEnding() {
      location.reload();
    }

    btnA.addEventListener("click", () => {
      const sc = scenes[currentScene];
      if (!sc) return;

      if (sc.ending) {
        // 結局：A = 重新開始
        restartGame();
        return;
      }

      renderScene(sc.nextA);
    });

    btnB.addEventListener("click", () => {
      const sc = scenes[currentScene];
      if (!sc) return;

      if (sc.ending) {
        // 結局：B = 顯示結束畫面
        showEndingScreen();
        return;
      }

      renderScene(sc.nextB);
    });

    // 初始化
    renderScene(0);

  </script>
</body>

</html>
